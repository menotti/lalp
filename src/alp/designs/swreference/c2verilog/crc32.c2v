/* crc32.c -- compute the CRC-32 of a data stream
 * Copyright (C) 1995-1996 Mark Adler
 * For conditions of distribution and use, see copyright notice in zlib.h 
 */

typedef unsigned long ulong;

ulong crc32(ulong crc, unsigned char* buf, ulong offset, ulong len, ulong *crc_table) {
    crc = crc ^ 0xffffffffL;
    for (unsigned int i=0; i<len; i++) {
        crc = crc_table[(crc ^ buf[offset + i]) & 0xff] ^ (crc >> 8);
    }
    return crc ^ 0xffffffffL;
}